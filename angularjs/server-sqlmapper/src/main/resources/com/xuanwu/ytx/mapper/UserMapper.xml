<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.xuanwu.ytx.mapper.UserMapper">

	<resultMap id="userResult" type="user">
		<id column="id" property="id" />
		<result column="add_time" property="addTime" />
	</resultMap>

	<sql id="findResultsSql">
		where 1=1
		<if test="params.name!=null">and name like concat('%', #{params.name}, '%')</if>
	</sql>

	<select id="findResultCount" resultType="int" parameterType="map">
		select count(*) from ytx_user
		<include refid="findResultsSql" />
	</select>

	<select id="findResults" resultMap="userResult" parameterType="map">
		select * from ytx_user
		<include refid="findResultsSql" />
		<if test="sorts != null and sorts.size() > 0 ">order by
			<foreach collection="sorts" index="key" item="sort" separator="," >
			#{key} #{sort}
		    </foreach>
		</if>

		<if test="page != null">limit #{page.from}, #{page.size}</if>
	</select>

	<select id="getById" resultMap="userResult" parameterType="int">
		select * from ytx_user where id=#{id}
	</select>

	<insert id="insert" keyProperty="id" useGeneratedKeys="true">
		insert into ytx_user (name,mobile,password,add_time)
		values(#{name},#{mobile},#{password},#{addTime})
	</insert>

	<update id="update">
		update ytx_user set name=#{name},mobile=#{mobile}
		where id=#{id}
	</update>

	<delete id="deleteById">
		delete from ytx_user where id=#{id}
	</delete>

</mapper>